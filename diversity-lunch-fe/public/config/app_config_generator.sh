#!/bin/sh
FILE_PATH="/usr/share/nginx/html/config/app-config.js"
rm -f $FILE_PATH
touch $FILE_PATH
echo "STARTING"
echo "window.appConfig = {
  REACT_APP_OIDC_CLIENT_ID: 'OIDC-Client-Id',
  REACT_APP_OIDC_SCOPE: 'OIDC-Scopes',
  REACT_APP_OIDC_CONFIG_ENDPOINT: 'OIDC-Well-Know-Endpoint',
  REACT_APP_OIDC_REDIRECT_URI: 'OIDC-Redirect-URI',
  REACT_APP_OIDC_AUTHORIZATION_ENDPOINT: 'OIDC-Authorization-Endpoint',
};" > $FILE_PATH
sed -i -- "s%OIDC-Client-Id%$REACT_APP_OIDC_CLIENT_ID%g" $FILE_PATH
sed -i -- "s%OIDC-Scopes%$REACT_APP_OIDC_SCOPE%g" $FILE_PATH
sed -i -- "s%OIDC-Well-Know-Endpoint%$REACT_APP_OIDC_CONFIG_ENDPOINT%g"  $FILE_PATH
sed -i -- "s%OIDC-Redirect-URI%$REACT_APP_OIDC_REDIRECT_URI%g" $FILE_PATH
sed -i -- "s%OIDC-Authorization-Endpoint%$REACT_APP_OIDC_AUTHORIZATION_ENDPOINT%g" $FILE_PATH
echo "FINISHED"


curl -X 'GET 'http://localhost:8080/api/account' -H 'accept: application/json' -H 'Authorization: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSIsImtpZCI6IjJaUXBKM1VwYmpBWVhZR2FYRUpsOGxWMFRPSSJ9.eyJhdWQiOiJlNDFlNjlhNC04ZWM1LTRiMTQtOGU2OC1hODgzZWYzOTUzOGQiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC8yN2MwM2U2Yi04OTZhLTQ2MTctOWYwNy0wMGVjMWY5YTA3NGUvIiwiaWF0IjoxNjY2MjcxMzA5LCJuYmYiOjE2NjYyNzEzMDksImV4cCI6MTY2NjI3Njg1MCwiYWNyIjoiMSIsImFpbyI6IkFZUUFlLzhUQUFBQVJjTGRPa3d0Vm1xdDFrYkt6WHVUMVVaUC9TZE5ZWTJPYk92QzlqeHlRbFFHd054NGowUFU4ZkhJaFY0d3RkbU81MWlQOXpPU0E4cjMrY0xmZW1WNURvc2FqUUFhTWVkeXlMZjAxMXlHRTF3VTU2a3NiTEVRUDEwL2MxWWxsZkVMdTNTZkJNNUNMOUR0L241dVN4UzgraWRqcjQzVnQvZXNPcEpTR1owYlpoQT0iLCJhbXIiOlsicHdkIiwibWZhIl0sImFwcGlkIjoiZTQxZTY5YTQtOGVjNS00YjE0LThlNjgtYTg4M2VmMzk1MzhkIiwiYXBwaWRhY3IiOiIwIiwiZmFtaWx5X25hbWUiOiJBYmRlbGhhZmlkaCIsImdpdmVuX25hbWUiOiJKYW1lbGVkZGluZSIsImlwYWRkciI6Ijg4LjE1My4xODEuOTciLCJuYW1lIjoiQWJkZWxoYWZpZGgsIEphbWVsZWRkaW5lIiwib2lkIjoiMjUxYWNkNTAtMjg2OC00YmI2LThkYjAtN2U2ZTU2ZjJmYzZhIiwib25wcmVtX3NpZCI6IlMtMS01LTIxLTY5MjczNjI5MC0yNTA5OTQ3MDM0LTM0NTE0NTkzNzQtMTQyODkiLCJyaCI6IjAuQVFrQWF6N0FKMnFKRjBhZkJ3RHNINW9IVHFScEh1VEZqaFJMam1pb2ctODVVNDBKQUlnLiIsInNjcCI6IkNhbGVuZGFycy5SZWFkIENhbGVuZGFycy5SZWFkV3JpdGUgR3JvdXAuUmVhZC5BbGwgT25saW5lTWVldGluZ3MuUmVhZFdyaXRlIFVzZXIuUmVhZCBVc2VyLlJlYWQuQWxsIiwic3ViIjoiODlJTzRvSGctWXFjY3VPSFd0SkhBYUI1aFNDU25kbXlEVG54cnl2M3pwSSIsInRpZCI6IjI3YzAzZTZiLTg5NmEtNDYxNy05ZjA3LTAwZWMxZjlhMDc0ZSIsInVuaXF1ZV9uYW1lIjoiamFiZGVsaGFmaWRoQGJyb2NraGF1cy1hZy5kZSIsInVwbiI6ImphYmRlbGhhZmlkaEBicm9ja2hhdXMtYWcuZGUiLCJ1dGkiOiJ4eXZjTjJ4TG9FNjl3ZnhSYXFBT0FBIiwidmVyIjoiMS4wIn0.OZh0SPVc_sPHdz7iZv000X_GrBahmdX0CggznLQvEZSF807p_p93H0PY0N6jLIyzxhMNImEubZIg4Tve-5ku4_PgTD980C9nBvgNWYYauYV5Cgsp_Zb6PVvPuD9f_Zpqk732gMLlf5z7RVyphvvCW8kGBqeWvs4k7fMG9YgHftshiGPCMaguJkRCOr2KNMiv9wSfEtRHXuitDU193S1qmsH9wjdRDc-OFYC71t1ZBgWvGaPIN9rethb3tkcI0YmSVttCWNjXKMCp3LvXIZ1xq40rmXof6iOA81Jo_e7hSjHGTkAZ-PP3dNdK4POon7Q4iTkgPa4t0VmnNyl-fSVF7g''

echo "curled"